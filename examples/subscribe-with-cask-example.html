<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Subscribe with Cask Example</title>
  </head>
  <body>
    <!--NO FRAMEWORK EXAMPLE-->

    <!-- <script type="module" src="https://unpkg.com/@caskprotocol/checkout-widget@1.0.0/dist/index.es.js"></script> -->
    <script type="module" src="../dist/index.es.js"></script>

    <subscribe-with-cask-button></subscribe-with-cask-button>
    <checkout-widget-dialog environment="development"></checkout-widget-dialog>
    <script>
      const subscribeWithCaskButton = document.querySelector('subscribe-with-cask-button');
      const checkoutWidgetDialog = document.querySelector('checkout-widget-dialog');

      subscribeWithCaskButton.addEventListener('click', async () => {
        subscribeWithCaskButton.loading = true;
        checkoutWidgetDialog.plan = '<PROVIDER_ADDRESS>/<PLAN_ID>';
        checkoutWidgetDialog.open = true;
        subscribeWithCaskButton.loading = false;
      });
      checkoutWidgetDialog.addEventListener('close', () => {
        checkoutWidgetDialog.open = false;
      });
      checkoutWidgetDialog.addEventListener('successSubscription', () => {
        alert('Subscription Created');
      });
    </script>
  </body>
</html>
